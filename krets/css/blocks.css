:root {
    --cell-size: 3.5vh;
    --gap-size: 0.25vh;
    --board-hedight: 74.75vh;
    --board-height: calc(20 * (var(--cell-size) + var(--gap-size)) - var(--gap-size));  /* rows(20) * (grid-size + gap) - gap */
    --preview-height: calc(2 * (var(--cell-size) + var(--gap-size)) - var(--gap-size));;
}

body {
    margin:0;
    padding: var(--cell-size);
    background-color: #222;
    color: white;
    font-family: "Geo", sans-serif;
}
#wrap {
    /*padding: 2em;*/
}
#board {
    cursor: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAOklEQVR4nO3OMQ4AIAgEwT3+/+ezUUPraek2hIIJAOaimjNGCsB2jKwPYmQDkpQg1ZeGnOXo6vd72AAcuxT+o8BYJwAAAABJRU5ErkJggg=='), crosshair;
    display: grid;
    grid-template-columns: repeat(10, var(--cell-size));
    grid-template-rows: repeat(20, var(--cell-size));
    gap: var(--gap-size);
    background-color: #333;
    padding: 0;
    border: var(--gap-size) solid #111;
    height: var(--board-height);
}

.cell {
    width: var(--cell-size);
    height: var(--cell-size);
}
#board-container {
  position: relative;
  height: var(--board-height);
}

#preview {
  display: grid;
  grid-template-columns: repeat(4, var(--cell-size));
  grid-template-rows: repeat(2, var(--cell-size));
  gap: var(--gap-size);
  padding: 2em;
  height: var(--preview-height);

}
#board-guides {
    position: absolute;
    opacity: 0.2;
    top: 0;
    left: calc(var(--gap-size) / 2);
    width: 101%;
    height: 100%;
    background-size:  calc(var(--cell-size) + var(--gap-size)) var(--cell-size);
background-image: repeating-linear-gradient(
    to right,
    rgba(255, 255, 255, 0) 0,
    rgba(255, 255, 255, 0) var(--cell-size),
    #000000 var(--gap-size),
    #000000
);
}

#game-container {
  display: flex;
  justify-content: center;
  align-items: flex-start;
}

#wrap {
  padding: 2em;
}

#info {
    display: flex;
    flex-direction: column;
    gap: 0.5vh;
    background: #1e1e1e;
    border-top-right-radius: 1em;
    border-bottom-right-radius: 1em;
    padding-bottom: 1em;
}

#score, #leader_board {
  color: white;
  font-size: 18pt;
}



#overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100.5%;
  background-color: rgba(0, 0, 0, 0.4);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24pt;
  z-index: 10;
}

.shape-I,
.shape-J,
.shape-L,
.shape-O,
.shape-S,
.shape-T,
.shape-Z {
    z-index: 10;
}

.shape-T {
    background-color: #c0279a !important;
}

.shape-I {
    background-color: #bd4333 !important;
}

.shape-O {
    background-color: #bdbb27 !important;
}

.shape-Z {
    background-color: #41ad2c !important;
}

.shape-L {
    background-color: #29b08a !important;
}

.shape-J {
    background-color: #2b73bd !important;
}

.shape-S {
    background-color: #6933bd !important;
}

.cell.ghost {
    background-color: rgba(157, 157, 87, 0.08);
}

.point {
  position: absolute;
  font-size: 19pt;
  color: #ffffff;
  animation: moveUpFadeOut 1.25s cubic-bezier(.1,.94,.82,1.05) forwards;
  left: 0;
}

@keyframes moveUpFadeOut {
  0% {
    bottom: 0;
    left: 0;
    opacity: 1;
  }
  100% {
    bottom: 20vh;
    opacity: 0;
  }
}

#info {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 3vh;
}

.info-item {
    display: flex;
    justify-content: space-between;
    font-size: 20pt;
    margin: 1vh;
    padding: 1vh;
    color: white;
    border-radius: 1em;
    width: 30vh;
    text-align: left;
}

.info-title {
    font-size: 80%;
}

.info-value {
    font-weight: bold;
    margin-left: auto;
    position: relative;
}

@keyframes pulse {
    0% {
        filter: brightness(1);
    }
    50% {
        filter: brightness(1.2);
    }
    100% {
        filter: brightness(1);
    }
}

.locked {
    animation: pulse 0.25s ease-in-out;
}

#game-container.level-2 #board {
    /* solid */
    background-color: #1a2c41;
    background-image: none;
}
#game-container.level-3 #board-guides {
    opacity: 0;
}
#game-container.level-3 #board {
    /* Cutting matt */
    background-color: rgba(25, 47, 38, 1);
    opacity: 1;
    background-image:
            linear-gradient(#233b36 calc(var(--cell-size)/10), transparent calc(var(--cell-size)/10)),
            linear-gradient(90deg, #233b36 calc(var(--cell-size)/10), transparent calc(var(--cell-size)/10)),
            linear-gradient(#233b36 calc(var(--cell-size)/20), transparent calc(var(--cell-size)/20)),
            linear-gradient(90deg, #233b36 calc(var(--cell-size)/20), rgba(25, 47, 38, 1) calc(var(--cell-size)/20));
    background-size:
            calc(var(--cell-size)*2) calc(var(--cell-size)*2),
            calc(var(--cell-size)*2) calc(var(--cell-size)*2),
            calc(var(--cell-size)/2) calc(var(--cell-size)/2),
            calc(var(--cell-size)/2) calc(var(--cell-size)/2);
    background-position:
            calc(var(--cell-size)/-10) calc(var(--cell-size)/-10),
            calc(var(--cell-size)/-10) calc(var(--cell-size)/-10),
            calc(var(--cell-size)/-20) calc(var(--cell-size)/-20),
            calc(var(--cell-size)/-20) calc(var(--cell-size)/-20);
}
#game-container.level-4 #board-guides {
    opacity: 0.08;
}
#game-container.level-4 #board {
    /* Diag TL -> BR */
    opacity: 1;
    background: repeating-linear-gradient(
        45deg,
        #39440e,
        #39440e calc(var(--cell-size)/10),
        #2a3014 calc(var(--cell-size)/10),
        #2a3014 calc(var(--cell-size)/2)
    );
    background-size: auto;
}
#game-container.level-4 #board-guides {
    opacity: 0;
}
#game-container.level-5 #board {
    /* triangles */
    background-color: rgba(23, 46, 45, 1);
    opacity: 1;
    background-image: linear-gradient(45deg, #1f5748 50%, rgba(23, 46, 45, 1) 50%);
    background-size:
        calc((var(--cell-size) + var(--gap-size))/2)
        calc((var(--cell-size) + var(--gap-size))/2);
}
#game-container.level-6 #board-guides {
    opacity: 0.08;
}
#game-container.level-6 #board {
    /* concentric circles from top left */
    background-color: #30142d;
    opacity: 1;
    background-image:  repeating-radial-gradient( circle at 0 0, transparent 0, #30142d calc(var(--cell-size)/3) ), repeating-linear-gradient( #442b4655, #442b46 );
    background-size: auto;
}
#game-container.level-7 #board-guides {
    opacity: 0;
}
#game-container.level-7 #board {
    /* diamonds gingham */
    background-color: rgba(46, 43, 23, 1);
    opacity: 1;
    background-image:  linear-gradient(135deg, #343a17 25%, transparent 25%), linear-gradient(225deg, #343a17 25%, transparent 25%), linear-gradient(45deg, #343a17 25%, transparent 25%), linear-gradient(315deg, #343a17 25%, rgba(46, 43, 23, 1) 25%);
    background-position:  var(--cell-size) 0, var(--cell-size) 0, 0 0, 0 0;
    background-size: var(--cell-size) var(--cell-size);
    background-repeat: repeat;
}
#game-container.level-8 #board-guides {
    opacity: 0;
}
#game-container.level-8 #board {
    /* zig-zag */
    background-color: rgba(23, 46, 40, 1);
    opacity: 1;
    background-image:
            linear-gradient(135deg, #173b36 25%, transparent 25%),
            linear-gradient(225deg, #173b36 25%, transparent 25%),
            linear-gradient(45deg, #173b36 25%, transparent 25%),
            linear-gradient(315deg, #173b36 25%,
            rgba(23, 46, 40, 1) 25%);
    background-position:
            calc(var(--cell-size)/2) 0,
            calc(var(--cell-size)/2) 0,
            0 0,
            0 0;
    background-size: var(--cell-size) var(--cell-size);
    background-repeat: repeat;
}
#game-container.level-9 #board-guides {
    opacity: 0;
}
#game-container.level-9 #board {
    /* 3d cubs */
    background-color: rgba(32, 23, 46, 1);
    opacity: 1;
    background-image:
        linear-gradient(30deg, #311f57 12%, transparent 12.5%, transparent 87%, #311f57 87.5%, #311f57),
        linear-gradient(150deg, #311f57 12%, transparent 12.5%, transparent 87%, #311f57 87.5%, #311f57),
        linear-gradient(30deg, #311f57 12%, transparent 12.5%, transparent 87%, #311f57 87.5%, #311f57),
        linear-gradient(150deg, #311f57 12%, transparent 12.5%, transparent 87%, #311f57 87.5%, #311f57),
        linear-gradient(60deg, #311f5777 25%, transparent 25.5%, transparent 75%, #311f5777 75%, #311f5777),
        linear-gradient(60deg, #311f5777 25%, transparent 25.5%, transparent 75%, #311f5777 75%, #311f5777);
    background-size: var(--cell-size) calc(1.75*var(--cell-size));
    background-position:
            0 0,
            0 0,
            calc(var(--cell-size)/2) calc(var(--cell-size)*0.875),
            calc(var(--cell-size)/2) calc(var(--cell-size)*0.875),
            0 0,
            calc(var(--cell-size)/2) calc(var(--cell-size)*0.875);
}
#game-container.level-10 #board-guides {
    opacity: 0;
}
#game-container.level-10 #board {
    /* checker */
    background-color: rgba(46, 23, 23, 1);
    opacity: 1;
    background-image:  repeating-linear-gradient(45deg, #571f1f 25%, transparent 25%, transparent 75%, #571f1f 75%, #571f1f), repeating-linear-gradient(45deg, #571f1f 25%, rgba(46, 23, 23, 1) 25%, rgba(46, 23, 23, 1) 75%, #571f1f 75%, #571f1f);
    background-position: 0 0, calc(var(--cell-size)/3) calc(var(--cell-size)/3);
    background-size: calc(var(--cell-size)/3*2) calc(var(--cell-size)/3*2);
}
#game-container.level-10 #board-guides {
    opacity: 0.09;
}
#game-container.level-11 #board {
    /* thin horizontal lines */
    background-color: rgba(25, 46, 23, 1);
    opacity: 1;
    background-size: calc(var(--cell-size)/3*2) calc(var(--cell-size)/3*2);
    background-image:  repeating-linear-gradient(0deg, #1f5731, #1f5731 1px, rgba(25, 46, 23, 1) 1px, rgba(25, 46, 23, 1));
}
#game-container.level-12 #board-guides {
    opacity: 0;
}
#game-container.level-12 #board {
    background-color: rgba(23, 39, 46, 1);
    opacity: 1;
    background-image:
            radial-gradient(#1f4457 var(--gap-size), transparent var(--gap-size)),
            radial-gradient(#1f4457 var(--gap-size), rgba(23, 39, 46, 1) var(--gap-size));
    background-size: calc(var(--cell-size)) calc(var(--cell-size));
    background-position: 0 0, calc(var(--cell-size)/2) calc(var(--cell-size)/2);
}
#game-container.level-13 #board-guides {
    opacity: 0;
}
#game-container.level-13 #board {
    background-color: rgba(39, 23, 46, 1);
    opacity: 1;
    background:
        linear-gradient(135deg, #401f5755 25%, transparent 25%)
            calc(var(--cell-size)*-1) 0/ calc(var(--cell-size)*2) calc(var(--cell-size)*2),
        linear-gradient(225deg, #401f57 25%, transparent 25%)
            calc(var(--cell-size)*-1) 0/ calc(var(--cell-size)*2) calc(var(--cell-size)*2),
        linear-gradient(315deg, #401f5755 25%, transparent 25%)
            0px 0/ calc(var(--cell-size)*2) calc(var(--cell-size)*2),
        linear-gradient(45deg, #401f57 25%, rgba(39, 23, 46, 1) 25%)
            0px 0/ calc(var(--cell-size)*2) calc(var(--cell-size)*2);
}
#game-container.level-14 #board {
   background-color: rgba(46, 23, 23, 1);
    opacity: 1;
    background-image: radial-gradient( ellipse farthest-corner at 17px 17px , #571f1f, #571f1f 50%, rgba(46, 23, 23, 1) 50%);
    background-size: 17px 17px;
}
#game-container.level-15 #board {
    background-color: rgba(45, 46, 23, 1);
    opacity: 1;
    background-image:  linear-gradient(30deg, #57541f 12%, transparent 12.5%, transparent 87%, #57541f 87.5%, #57541f), linear-gradient(150deg, #57541f 12%, transparent 12.5%, transparent 87%, #57541f 87.5%, #57541f), linear-gradient(30deg, #57541f 12%, transparent 12.5%, transparent 87%, #57541f 87.5%, #57541f), linear-gradient(150deg, #57541f 12%, transparent 12.5%, transparent 87%, #57541f 87.5%, #57541f), linear-gradient(60deg, #57541f77 25%, transparent 25.5%, transparent 75%, #57541f77 75%, #57541f77), linear-gradient(60deg, #57541f77 25%, transparent 25.5%, transparent 75%, #57541f77 75%, #57541f77);
    background-size: 18px 32px;
    background-position: 0 0, 0 0, 9px 16px, 9px 16px, 0 0, 9px 16px;
}
#game-container.level-16 #board {
    background-color: rgba(23, 46, 24, 1);
    opacity: 1;
    background-image: linear-gradient(0deg, rgba(23, 46, 24, 1) 50%, #2a571f 50%);
    background-size: 9px 9px;
}
#game-container.level-17 #board {
    background-color: rgba(23, 46, 45, 1);
    opacity: 1;
    background-image: linear-gradient(45deg, #1f5748 50%, rgba(23, 46, 45, 1) 50%);
    background-size: 9px 9px;
}
#game-container.level-18 #board {
    background-color: rgba(23, 24, 46, 1);
    opacity: 1;
    background-image: linear-gradient(-45deg, rgba(23, 24, 46, 1), rgba(23, 24, 46, 1) 50%, #1f2857 50%, #1f2857);
    background-size: 20px 20px;
}
#game-container.level-19 #board {
    /* bold vertical stripes */
    background-color: rgba(48, 20, 20, 1);
    opacity: 1;
    background-image: linear-gradient(to right, #422828, #422828 14px, rgba(48, 20, 20, 1) 14px, rgba(48, 20, 20, 1) );
    background-size: 28px 100%;
    }
#game-container.level-20 #board {
    background-color: rgba(23, 39, 46, 1);
    opacity: 1;
    background-image:  radial-gradient(#1f4457 2px, transparent 2px), radial-gradient(#1f4457 2px, rgba(23, 39, 46, 1) 2px);
    background-size: 80px 80px;
    background-position: 0 0,40px 40px;
}
input[type="checkbox"] {
    -webkit-appearance: none;
    appearance: none;
    width: 1em;
    height: 1em;
    background-color: #333;
    border: 0.2em dotted #666;
    cursor: pointer;
    position: relative;
    top: 0.3em;
    margin-right: 0.4em;
}

input[type="checkbox"]:checked {
    background-color: white;
    border: 0.1em solid black;
}
label {
    cursor: pointer;
}
input:focus {
    outline: none;
}

#final_screen {
    justify-content: center;
    text-align: center;
    background-color: rgba(0,0,0,0.4);
    border-radius: 0.5em;
    padding: 0.5em;
}
#final_screen .title {
    font-size: 120%;
}
#final_screen .bonustitle {
    font-size: 120%;
    color: #FC0;
    font-weight: bold;
}

.info-meter {
    padding-top: .7em;
    margin-bottom: -0.8em;
    justify-content: center;
    display: flex;
    width: 100%;
    margin-top: 1vh;
}
.meter-square {
    display: flex;
    width: 0.7em;
    height: 0.7em;
    margin: 0.1em;
    background-color: lightgray;
    clear:left;
}
.meter-square.active {
    background-color: green;
}

#controls {
    display: none;
    flex-direction: column;
    align-items: center;
    position: fixed;
    bottom: 0;
    left: 0;
    margin: 2vw;
    z-index: 20;
}

#controls button {
    width: 15vw;
    height: 15vw;
    margin: 2vw;
    padding: 0;
    background-color: rgba(0,0,0,0.1);
    border: solid 2px #ccc;
    border-radius: 0.5em;
    font-size: 2em;
    cursor: pointer;
    color: white;
    transition: background-color 0.3s, border-color 0.3s;
}

button#space {
    width: 10vw;
    height: 10vw;
    margin: 2vw 1vw;
}

#controls button:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: #fff;
}

#controls button:active {
    background-color: rgba(255, 255, 255, 0.2);
    border-color: #aaa;
}

@media (max-width: 600px) {
    .meter-square {
        padding: 0;
        margin: 0;
    }
    #game-container {
        flex-wrap: wrap;
    }
    .cell {
    }

    #info {
        flex-direction: column;
        flex-wrap: wrap;
        justify-content: space-between;
    }
    .info-title,
    .info-value,
    .info-item {
        width: 3em;
        margin: 0.2em;
        padding: 0;
        font-weight: normal;
        text-align: center;
        justify-content: normal;
    }
    #level-meter {
        display: flex;
        flex-direction: column-reverse;
        /*display: none;*/
    }
    #preview {
        flex: 3;
    }
    #leader_board {

    }
    #score-details {
        display: flex;
        flex-wrap: wrap;
        justify-items: auto;
    }
    #level-meter {
        flex: 3;
        margin: auto;
        width: auto;
    }
}